{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/header.js","../src/js/order-modal.js","../src/js/furniture-details-modal.js","../src/js/furniture_list.js","../src/js/popular-goods.js","../src/js/faq.js","../src/js/feedback.js"],"sourcesContent":["const refs = {\n  // Furniture section\n  feedbackList: document.querySelector('.feedback-list'),\n  categoriesList: document.querySelector('.furniture-categories'),\n  furnitureGrid: document.querySelector('.furniture-gallery'),\n  furnitureLoadMoreBtn: document.querySelector('#furniture-loadMoreBtn'),\n  modalDetailisProduct: document.querySelector('.modal'),\n  popularGoodsList: document.querySelector('.popular-goods-list'),\n  modalOrderForm: document.querySelector(\".modal-form\"),\n  modalOrderBackground: document.querySelector(\".order-modal\"),\n  modalOrderEmail: document.querySelector(\".input-email\"),\n  modalOrderComment: document.querySelector(\".textarea\"),\n  modalOrderPhone: document.querySelector(\".input-phone\"),\n// Header modal section\n  headerOpenModalBtn: document.querySelector('[data-modal-open]'),\n  headerCloseModalBtns: document.querySelectorAll('[data-modal-close]'),\n  headerModal: document.querySelector('[data-modal-mobnav]'),\n  headerMenuLinks: document.querySelectorAll('[data-modal-mobnav] a'),\n  headerBody: document.body,\n  headerScrollButtons: document.querySelectorAll('.scroll-to-furniture'),\n  headerScrollBtns: document.querySelectorAll('.scroll-to-furniture'),\n  };\n\nexport default refs;\n","import refs from './refs.js';\n\n// Open and close modal functionality for mobile navigation + \"escape\" button to close modal\n\n(function () {\n\n    refs.headerOpenModalBtn?.addEventListener('click', openModal);\n\n    refs.headerCloseModalBtns?.forEach(btn =>\n        btn.addEventListener('click', closeModal));\n    \n    refs.headerModal?.addEventListener('click', onBackdropClick);\n    refs.headerMenuLinks?.forEach(link => link.addEventListener('click', closeModal));\n    window.addEventListener('keydown', onEscPress);\n\n    function openModal() {\n        refs.headerModal?.classList.add('isopen');\n        refs.headerBody?.classList.add('modal-open');\n    }\n\n    function closeModal() {\n        refs.headerModal?.classList.remove('isopen');\n        refs.headerBody?.classList.remove('modal-open');\n    }\n\n    function onBackdropClick(event) {\n        const clickedInsideModal = event.target.closest('.mob-modal-wrap');\n        if (!clickedInsideModal) {\n            closeModal();\n        }\n    }\n\n    function onEscPress(event) {\n        if (event.key === 'Escape' || event.code === 'Escape') {\n            closeModal();\n        }\n    }\n})();\n\n\n// Scroll to \"Furniture\" section when clicking on the button\n\nrefs.headerScrollBtns?.forEach(button => {\n    button.addEventListener('click', e => {\n        e.preventDefault();\n\n        const target = document.getElementById('furniture');\n        if (!target) return;\n\n        if (refs.headerModal?.classList.contains('isopen')) {\n            refs.headerModal.classList.remove('isopen');\n            refs.headerBody?.classList.remove('modal-open');\n\n            setTimeout(() => {\n                target.scrollIntoView({ behavior: 'smooth' });\n            }, 300);\n        } else {\n            target.scrollIntoView({ behavior: 'smooth' });\n        }\n    });\n});","import iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from \"axios\";\nimport refs from \"./refs\";\n\nwindow.addEventListener('unhandledrejection', event => {\n    event.preventDefault();\n});\n// слухач події для форми\nrefs.modalOrderForm.addEventListener(\"submit\", handleFormSubmit);\n\n// Сабміт на формі\nasync function handleFormSubmit(event) {\n    event.preventDefault();\n\n    const savedData = localStorage.getItem(\"orderData\");\n    if (!savedData) {\n        iziToast.error({\n            title: 'Помилка',\n            message: 'Немає інформації про товар. Оформлення неможливе.',\n            position: 'topCenter',\n        });\n        return;\n    }\n\n    const parsedData = JSON.parse(savedData);\n    const productId = parsedData.productId;\n    const color = parsedData.color;\n\n    if (!productId || !color) {\n        iziToast.error({\n            title: 'Помилка',\n            message: 'Немає даних про товар. Спробуйте додати його ще раз.',\n            position: 'topCenter',\n        });\n        return;\n    }\n\n    // значення в інпутах\n    const email = event.currentTarget.elements.email.value.trim();\n    const phone = event.currentTarget.elements.phone.value.replace(/^\\+/, \"\");\n    const comment = event.currentTarget.elements.comment.value.trim();\n    const orderData = {\n        \"email\": email,\n        \"phone\": phone,\n        \"modelId\": productId,\n        \"color\": color,\n        \"comment\": comment\n    };\n\n    // помилка на емейлі (функція нижче)\n    const existingEmailError = refs.modalOrderEmail.parentElement.querySelector(\".error-text\");\n    if (!email || email.length > 64) {\n        refs.modalOrderEmail.classList.add(\"error-message\");\n        markupError(refs.modalOrderEmail, \"Не валідний Email\");\n    } else {\n        refs.modalOrderEmail.classList.remove(\"error-message\");\n        if (existingEmailError) {\n            existingEmailError.remove();\n        };\n    };\n\n    // помилка на телефоні якщо він порожній, якщо не валідний, то патерн і так не дає пройти, тому я вже не писала\n    const existingPhoneError = refs.modalOrderPhone.parentElement.querySelector(\".error-text\");\n    if (!phone) {\n        refs.modalOrderPhone.classList.add(\"error-message\");\n        markupError(refs.modalOrderPhone, \"Введіть номер телефону\");\n    } else {\n        refs.modalOrderPhone.classList.remove(\"error-message\");\n        if (existingPhoneError) {\n            existingPhoneError.remove();\n        };\n    };\n\n    // помилка на комент\n    const existingCommentError = refs.modalOrderComment.parentElement.querySelector(\".error-text\");\n    if (comment.length < 5 || comment.length > 256) {\n        refs.modalOrderComment.classList.add(\"error-message\");\n        markupError(refs.modalOrderComment, \"Введіть коментар довжиною від 5 до 256 символів\");\n    } else {\n        refs.modalOrderComment.classList.remove(\"error-message\");\n        if (existingCommentError) {\n            existingCommentError.remove();\n        };\n    }\n\n    // перевірка на валідність при сабміті з повідомленням iziToast\n    const isEmailValid = email && email.length <= 64 && /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\nconst isPhoneValid = /^380\\d{9}$/.test(phone);\nconst isCommentValid = comment.length >= 5 && comment.length <= 256;\n\nif (!isEmailValid || !isPhoneValid || !isCommentValid) {\n    iziToast.error({\n        title: 'Помилка',\n        message: 'Будь ласка, виправ помилки у формі',\n        position: 'topCenter',\n    });\n    return; \n}\n\nconst success = await submitOrder(orderData);\nif (success) {\n    iziToast.success({\n        title: 'Успіх',\n        message: 'Форма успішно відправлена!',\n        position: 'topCenter',\n    });\n    refs.modalOrderForm.reset();\n    closeOrderModal();\n    \n} else {\n        iziToast.error({\n            title: 'Помилка',\n            message: 'Будь ласка, виправ помилки у формі',\n            position: 'topCenter',\n        });\n    }\n}\n\n// Функція повідомлення при помилці під інпутами\nfunction markupError(targetElement, message) {\n    const existingError = targetElement.parentElement.querySelector(\".error-text\");\n    if (!existingError) {\n        const errorMessage = `<p class=\"error-text\">${message}</p>`;\n        targetElement.insertAdjacentHTML(\"afterend\", errorMessage);\n    };\n}\n\n// відкриття модалки\nexport function openOrderModal() {\n    document.body.classList.add('body--no-scroll');\n    refs.modalOrderBackground.classList.add('order-open');\n}\n\n//  закриття модалки\nfunction closeOrderModal() {\n    document.body.classList.remove('body--no-scroll');\n    refs.modalOrderBackground.classList.remove('order-open');\n    localStorage.clear();\n}\n\n// слухачі подій для закриття\nfunction listenerHandlClose() {\n    const closeFormBtn = document.querySelector(\".close-form-btn\");\n    closeFormBtn.addEventListener(\"click\", closeOrderModal);\n\n\n    document.addEventListener(\"keydown\", event => {\n        if (event.key === \"Escape\") {\n            closeOrderModal();\n        };\n    });\n    refs.modalOrderBackground.addEventListener(\"click\", event => {\n        if (event.target === refs.modalOrderBackground) {\n            closeOrderModal();\n        }\n    });\n}\n listenerHandlClose();\n\n// інпут у фокусі\nfunction elementInFocus(targetElement) {\n    targetElement.addEventListener(\"focus\", () => {\n        targetElement.removeAttribute(\"placeholder\");\n\n        if (targetElement === refs.modalOrderPhone) {\n            // Якщо немає префікса — додаємо один раз\n            if (!targetElement.value.startsWith('+380')) {\n                targetElement.value = '+380';\n            }\n        }\n    });\n\n    if (targetElement === refs.modalOrderPhone) {\n        // Слухач для вводу — додається лише один раз\n        targetElement.addEventListener(\"input\", () => {\n            refs.modalOrderPhone.value = \"+380\" + refs.modalOrderPhone.value.replace(/\\D/g, '').slice(3);\n        });\n    }\n}\nelementInFocus(refs.modalOrderEmail);\nelementInFocus(refs.modalOrderComment);\nelementInFocus(refs.modalOrderPhone);\n\n// інпут не у фокусі\nfunction elementOutFocus(targetElement, placeholder) {\n    targetElement.addEventListener(\"blur\", () => {\n        targetElement.setAttribute(\"placeholder\", `${placeholder}`);\n    })\n}\nelementOutFocus(refs.modalOrderEmail, \"12345ggg@gmail.com\");\nelementOutFocus(refs.modalOrderComment, \"Type your message...\");\nelementOutFocus(refs.modalOrderPhone, \"+38 (099) 123 22 11\");\n\n// запит на бекенд\nconst baseURL = \"https://furniture-store.b.goit.study/api\"\nasync function submitOrder(orderData) {\n    try {\n        const response = await axios.post(`${baseURL}/orders`, orderData, {\n            headers: { 'Content-Type': 'application/json' }\n        });\n        return response.status === 201;\n    } catch (error) {\n        const errorMessage = error.response?.data?.message || 'Помилка запиту';\n        iziToast.error({\n            title: 'Помилка',\n            message: errorMessage,\n            position: 'topCenter',\n        });\n        return false;\n    }\n}\n","//  Імпорти\nimport refs from './refs';\nimport iziToast from 'izitoast';\nimport { openOrderModal } from './order-modal';\nimport rater from 'rater-js';\n\nconst modalContent = document.querySelector('.modal-content');\nconst starToRunModal = document.querySelector('.star-to-run');\nconst starUrlModal = starToRunModal.getAttribute('src');\n\n// Рендер модалки з деталями продукту\nexport function renderProductDetails(product) {\n  openProductDetailis();\n\n  const markup = product.map(createProductMarkup).join('');\n  modalContent.innerHTML = markup;\n\n  addStarToModalList(product[0]);\n\n  // заміна кольору зірочок\n  modalContent.querySelectorAll('.star-value').forEach(el => {\n    el.style.backgroundImage = `url(\"${starUrlModal}\")`;\n  });\n\n  const mainImg = document.getElementById('main-product-img');\n  const thumbnails = document.querySelectorAll('.mini-img');\n\n  const originalSrc = mainImg.src;\n  const originalAlt = mainImg.alt;\n\n  thumbnails.forEach(thumbnail => {\n    thumbnail.addEventListener('mouseover', () => {\n      mainImg.style.opacity = 0.5;\n      setTimeout(() => {\n        mainImg.src = thumbnail.src;\n        mainImg.alt = thumbnail.alt;\n        mainImg.style.opacity = 1;\n      }, 200);\n    });\n\n    thumbnail.addEventListener('mouseout', () => {\n      mainImg.style.opacity = 0.5;\n      setTimeout(() => {\n        mainImg.src = originalSrc;\n        mainImg.alt = originalAlt;\n        mainImg.style.opacity = 1;\n      }, 200);\n    });\n  });\n\n  listenerClosseModalProduct();\n\n  const form = document.querySelector('.detailis-product');\n  form.addEventListener('submit', handleOrderSubmit);\n}\n\n//  Генерація HTML для продукту\nfunction createProductMarkup({\n  _id,\n  images,\n  name,\n  price,\n  rate,\n  sizes,\n  color,\n  description,\n  type,\n}) {\n  return `\n    <div class=\"img-product\">\n      <img class=\"large-img\" src=\"${images[0]\n    }\" alt=\"${name}\" id=\"main-product-img\"/>\n      <div class=\"small-img\">\n        <img class=\"mini-img\" src=\"${images[1]}\" alt=\"${name}\" />\n        <img class=\"mini-img\" src=\"${images[2]}\" alt=\"${name}\" />\n      </div>\n    </div>\n\n    <div class=\"product-wrapper\">\n      <div class=\"product-content\">\n        <h2 class=\"title-modal-product\">${name}</h2>\n        <p class=\"type-product-modal\">${type}</p>\n        <p class=\"price\">${price}\\u00A0<span class=\"hrn\"></span>грн</p>\n        <div id=\"rater-modal-${_id}\" data-rating-modal=\"${rate}\"  aria-label=\"Rated ${rate} out of 5 stars\"></div>\n      </div>\n\n      <form class=\"detailis-product\">\n        <p class=\"select-color\" aria-label=\"Choose product color\">Колір</p>\n        <div class=\"radio-group\">\n          ${generateColorOptions(color)}\n        </div>\n\n        <div class=\"discription-container\">\n          <p class=\"description\">${description}</p>\n          <p class=\"size\">Розміри:\\u00A0 <span class=\"size-span\">${sizes}</span></p>\n        </div>\n\n        <div class=\"modal-product-actions\">\n          <button class=\"modal-product-btn\" type=\"submit\" data-id=${_id} aria-label=\"Open order form modal\">\n            Перейти до замовлення\n          </button>\n        </div>\n      </form>\n    </div>\n  `;\n}\n\n//  Генерація кольорів\nfunction generateColorOptions(colors) {\n  return colors\n    .map(\n      (color, index) => `\n    <label class=\"color-label\">\n      <input type=\"radio\" name=\"color\" value=\"${color}\" ${index === 0 ? 'checked' : ''\n        } />\n      <span class=\"circle\" style=\"background-color: ${color}\"></span>\n      <span class=\"checkmark\"></span>\n    </label>\n  `\n    )\n    .join('');\n}\n\nfunction addStarToModalList({ rate, _id }) {\n  rater({\n    max: 5,\n    readOnly: true,\n    rating: rate,\n    starSize: 20,\n    element: document.querySelector(`#rater-modal-${_id}`),\n  });\n}\n\n// Обробка сабміту форми\nfunction handleOrderSubmit(event) {\n  event.preventDefault();\n\n  const submitBtn = document.querySelector('.modal-product-btn');\n  const productId = submitBtn.dataset.id;\n  const selectedColor = event.target.querySelector(\n    'input[name=\"color\"]:checked'\n  )?.value;\n\n  if (!selectedColor) {\n    iziToast.warning({\n      title: 'Увага',\n      message: 'Оберіть колір перед замовленням',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  const orderData = { productId, color: selectedColor };\n  localStorage.setItem('orderData', JSON.stringify(orderData));\n\n  closseProductDatailis();\n  openOrderModal(); // якщо буде така функція\n}\n\n// Відкриття модалки\nfunction openProductDetailis() {\n  document.body.classList.add('body--no-scroll');\n  refs.modalDetailisProduct.classList.add('modal--is-open');\n}\n\n//  Закриття модалки\nfunction closseProductDatailis() {\n  document.body.classList.remove('body--no-scroll');\n  refs.modalDetailisProduct.classList.remove('modal--is-open');\n}\n\n//  Слухачі для закриття модалки\nfunction listenerClosseModalProduct() {\n  const closseBtn = document.querySelector('.modal-close-btn');\n  closseBtn.addEventListener('click', closseProductDatailis);\n  document.addEventListener('keydown', event => {\n    if (event.key === 'Escape') closseProductDatailis();\n  });\n\n  refs.modalDetailisProduct.addEventListener('click', event => {\n    if (event.target === refs.modalDetailisProduct) closseProductDatailis();\n  });\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '../css/furniture-list.css';\nimport refs from './refs';\nimport { renderProductDetails } from './furniture-details-modal.js';\n\nconst imagesUrlForCategories = {\n  allProductsImg: document.querySelector('.all-products'),\n  bathroomFurniture: document.querySelector('.bathroom-furniture'),\n  bedsAndMattresses: document.querySelector('.beds-and-mattresses'),\n  cabinets: document.querySelector('.cabinets-and-storage-systems'),\n  chairsAndStools: document.querySelector('.chairs-and-stools'),\n  childrensFurniture: document.querySelector('.childrens-furniture'),\n  decorAndAccessories: document.querySelector('.decor-and-accessories'),\n  gardenAndOutdoor: document.querySelector('.garden-and-outdoor-furnitur'),\n  hallwayFurniture: document.querySelector('.hallway-furniture'),\n  kitchens: document.querySelector('.kitchens'),\n  officeFurniture: document.querySelector('.office-furniture'),\n  tables: document.querySelector('.tables'),\n  upholsteredFurniture: document.querySelector('.upholstered-furniture'),\n};\n\nlet allProducts = [];\nconst BaseUrl = 'https://furniture-store.b.goit.study/api/';\n\nrefs.categoriesList.addEventListener('click', handlerCategories);\nrefs.furnitureLoadMoreBtn.addEventListener('click', handlerMore);\ngetCategories();\n\n// Track current viewport state\nlet currentIsDesktop = window.innerWidth >= 768;\n\n// Initialize furniture loading\nsetTimeout(() => {\n  if (currentIsDesktop) {\n    getFurnitureForPagination(limit, 1);\n  } else {\n    getFurniture(limit, 1);\n  }\n}, 100);\n\n// Handle viewport resize\nlet resizeTimeout;\nwindow.addEventListener('resize', () => {\n  clearTimeout(resizeTimeout);\n  resizeTimeout = setTimeout(() => {\n    const isDesktop = window.innerWidth >= 768;\n    \n    // Only reload if viewport type changed (mobile <-> desktop)\n    if (isDesktop !== currentIsDesktop) {\n      currentIsDesktop = isDesktop;\n      \n      // Get current category\n      const currentCategoryBtn = refs.categoriesList.querySelector('.category-btn.active');\n      const selectedCategory = currentCategoryBtn ? currentCategoryBtn.dataset.category : '';\n      \n      // Reset page to 1 when switching viewport\n      page = 1;\n      \n      // Clear grid and reload with appropriate method\n      refs.furnitureGrid.innerHTML = '';\n      \n      if (isDesktop) {\n        // Switch to desktop pagination\n        hideLoadMoreBtn();\n        getFurnitureForPagination(limit, page, selectedCategory);\n      } else {\n        // Switch to mobile \"Load More\"\n        getFurniture(limit, page, selectedCategory);\n      }\n    }\n  }, 250); // Debounce resize events\n});\n\nlet isInitialLoad = true;\n/**типу стан сторінки  а саму:\n * \"Це перше завантаження сторінки, ще нічого не клікали, не фільтрували, не пагінували.\"*/\n\nfunction renderFurniture() {\n  markUpFurniture(allProducts);\n  updatePaginationControls();\n  setTimeout(() => {\n    if (!isInitialLoad) {\n      scrollToFurnitureTop();\n    }\n    isInitialLoad = false;\n  }, 300);\n}\n/**renderFurniture() ф.  в яку перенесені рендер продуктів,\n *  обоновленя стану пагінації і доданий контроли над скролом*/\nexport async function getCategories() {\n  try {\n    const res = await axios.get(`${BaseUrl}categories`);\n    const categories = res.data;\n    markUpCategories(categories);\n  } catch (error) {\n    iziToast.error({\n      title: 'Помилка',\n      message: 'Не вдалося завантажити дані. Спробуйте пізніше',\n      position: 'topRight',\n    });\n  } finally {\n  }\n}\n\nfunction markUpCategories(categories) {\n  const categoryImages = {\n    '': `${imagesUrlForCategories.allProductsImg.src}`,\n    '66504a50a1b2c3d4e5f6a7b8': `${imagesUrlForCategories.upholsteredFurniture.src}`,\n    '66504a50a1b2c3d4e5f6a7b9': `${imagesUrlForCategories.cabinets.src}`,\n    '66504a50a1b2c3d4e5f6a7ba': `${imagesUrlForCategories.bedsAndMattresses.src}`,\n    '66504a50a1b2c3d4e5f6a7bb': `${imagesUrlForCategories.tables.src}`,\n    '66504a50a1b2c3d4e5f6a7bc': `${imagesUrlForCategories.chairsAndStools.src}`,\n    '66504a50a1b2c3d4e5f6a7bd': `${imagesUrlForCategories.kitchens.src}`,\n    '66504a50a1b2c3d4e5f6a7be': `${imagesUrlForCategories.childrensFurniture.src}`,\n    '66504a50a1b2c3d4e5f6a7bf': `${imagesUrlForCategories.officeFurniture.src}`,\n    '66504a50a1b2c3d4e5f6a7c0': `${imagesUrlForCategories.hallwayFurniture.src}`,\n    '66504a50a1b2c3d4e5f6a7c1': `${imagesUrlForCategories.bathroomFurniture.src}`,\n    '66504a50a1b2c3d4e5f6a7c2': `${imagesUrlForCategories.gardenAndOutdoor.src}`,\n    '66504a50a1b2c3d4e5f6a7c3': `${imagesUrlForCategories.decorAndAccessories.src}`,\n  };\n\n  const markUp = [{ _id: '', name: 'Всі товари' }, ...categories]\n    .map(({ _id, name }) => {\n      const imageUrl = categoryImages[_id];\n      return `\n        <li>\n        <button type=\"button\"\n         class=\"category-btn${_id === '' ? ' active' : ''}\"\n          data-category=\"${_id}\"  style=\"${\n        imageUrl\n          ? `background-image: url('${imageUrl}');background-size: cover; background-position: center;\"`\n          : ''\n      }\">\n          ${name}\n          </button>\n          </li>\n          `;\n    })\n    .join('');\n  refs.categoriesList.insertAdjacentHTML('beforeend', markUp);\n}\n\nlet page = 1;\nconst limit = 8;\nlet totalPages = 1;\nexport async function getFurniture(limit, page, category = '') {\n  try {\n    const params = {\n      limit: limit,\n      page: page,\n    };\n    if (category) {\n      params.category = category;\n    }\n\n    const responce = await axios.get(`${BaseUrl}furnitures`, { params });\n    const data = responce.data;\n    allProducts = data.furnitures;\n    totalPages = Math.ceil(data.totalItems / Number(limit));\n    const furnituresAll = data.furnitures;\n\n    if (page === 1) {\n      refs.furnitureGrid.innerHTML = '';\n      allProducts = furnituresAll;\n    } else {\n      allProducts = [...allProducts, ...furnituresAll];\n    }\n\n    totalPages = Math.ceil(data.totalItems / limit);\n    markUpFurniture(furnituresAll);\n    showLoadMoreBtn();\n\n    if (page >= totalPages) {\n      hideLoadMoreBtn();\n    } else {\n      showLoadMoreBtn();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Помилка',\n      message: 'Не вдалося завантажити дані. Спробуйте пізніше',\n      position: 'topRight',\n    });\n    hideLoadMoreBtn();\n  }\n}\n\nfunction markUpFurniture(items) {\n  const markUp = items\n    .map(({ _id, name, images, color, price }) => {\n      const colorsFurniture = ` <ul class=\"color-list\"> \n        ${color\n          .map(\n            colorValue =>\n              `<li class=\"color-dot\" style=\"background-color:${colorValue}\"></li>`\n          )\n          .join('')}\n        </ul> `;\n      return `\n        <li class=\"furniture-card\">\n        <img src=\"${images[0]}\" alt=\"${name}\" class=\"furniture-img\">\n        <h3 class=\"furniture-name\">${name}</h3>\n         ${colorsFurniture}\n        <p class=\"furniture-price\">${price} грн</p>\n        <button class=\"furniture-btn btn-details\" data-id=\"${_id}\">Детальніше</button>\n        </li>\n        `;\n    })\n    .join('');\n  refs.furnitureGrid.insertAdjacentHTML('beforeend', markUp);\n}\n\nexport function handlerCategories(event) {\n  if (!event.target.classList.contains('category-btn')) return;\n  const buttons = refs.categoriesList.querySelectorAll('.category-btn');\n  buttons.forEach(btn => btn.classList.remove('active'));\n\n  event.target.classList.add('active');\n  const selectCategory = event.target.dataset.category;\n  page = 1;\n\n  // Use global currentIsDesktop state\n  if (currentIsDesktop) {\n    getFurnitureForPagination(limit, page, selectCategory);\n  } else {\n    getFurniture(limit, page, selectCategory);\n  }\n}\n\nfunction showLoadMoreBtn() {\n  refs.furnitureLoadMoreBtn.classList.remove('visually-hidden-moreBtn');\n}\nfunction hideLoadMoreBtn() {\n  refs.furnitureLoadMoreBtn.classList.add('visually-hidden-moreBtn');\n}\nrefs.furnitureLoadMoreBtn.addEventListener('click', handlerMore);\n\nconst prevBtn = document.querySelector('#furniture-prevBtn');\nconst nextBtn = document.querySelector('#furniture-nextBtn');\nconst paginationNumbers = document.querySelector(\n  '#furniture-paginationNumbers'\n);\n\nif (prevBtn) prevBtn.addEventListener('click', handlePrevPage);\nif (nextBtn) nextBtn.addEventListener('click', handleNextPage);\nif (paginationNumbers)\n  paginationNumbers.addEventListener('click', handlePageNumberClick);\n\nexport function handlerMore(event) {\n  page += 1;\n  const currentCategoryBtn =\n    refs.categoriesList.querySelector(`.category-btn.active`);\n  const selectedCategory = currentCategoryBtn\n    ? currentCategoryBtn.dataset.category\n    : '';\n  getFurniture(limit, page, selectedCategory);\n}\n\nfunction handlePrevPage() {\n  if (page > 1) {\n    page -= 1;\n    const currentCategoryBtn =\n      refs.categoriesList.querySelector(`.category-btn.active`);\n    const selectedCategory = currentCategoryBtn\n      ? currentCategoryBtn.dataset.category\n      : '';\n    getFurnitureForPagination(limit, page, selectedCategory);\n  }\n}\n\nfunction handleNextPage() {\n  if (page < totalPages) {\n    page += 1;\n    const currentCategoryBtn =\n      refs.categoriesList.querySelector(`.category-btn.active`);\n    const selectedCategory = currentCategoryBtn\n      ? currentCategoryBtn.dataset.category\n      : '';\n    getFurnitureForPagination(limit, page, selectedCategory);\n  }\n}\n\nfunction handlePageNumberClick(event) {\n  if (event.target.classList.contains('page-number')) {\n    const targetPage = parseInt(event.target.dataset.page);\n    if (targetPage !== page) {\n      page = targetPage;\n      localStorage.setItem('currentPage', page);\n\n      const currentCategoryBtn =\n        refs.categoriesList.querySelector(`.category-btn.active`);\n      const selectedCategory = currentCategoryBtn\n        ? currentCategoryBtn.dataset.category\n        : '';\n      getFurnitureForPagination(limit, page, selectedCategory);\n    }\n  }\n}\n\nasync function getFurnitureForPagination(limit, page, category = '') {\n  try {\n    const params = {\n      limit: limit,\n      page: page,\n    };\n    if (category) {\n      params.category = category;\n    }\n    showLoader(); //! тут зявляється лоадер\n\n    const responce = await axios.get(`${BaseUrl}furnitures`, { params });\n    const data = responce.data;\n    allProducts = data.furnitures;\n    totalPages = Math.ceil(data.totalItems / limit);\n\n    refs.furnitureGrid.innerHTML = '';\n    hideLoadMoreBtn();\n\n    renderFurniture(); //! тут виклик нової ф. яка рендерить продукти+ обновляє сторінки+котроль скролу\n  } catch (error) {\n    iziToast.error({\n      title: 'Помилка',\n      message: 'Не вдалося завантажити дані. Спробуйте пізніше',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader(); //!тут ховаю лоадер\n  }\n}\n\nrefs.furnitureGrid.addEventListener('click', event => {\n  const cardBtn = event.target.closest('.furniture-btn');\n  if (!cardBtn) return;\n\n  const productId = cardBtn.dataset.id;\n  const selectedProduct = allProducts.find(\n    product => product._id === productId\n  );\n\n  if (selectedProduct) {\n    renderProductDetails([selectedProduct]);\n  } else {\n    iziToast.error({\n      title: 'Помилка',\n      message: 'Не вдалося завантажити дані. Спробуйте пізніше',\n      position: 'topRight',\n    });\n  }\n});\n\nfunction updatePaginationControls() {\n  const prevBtn = document.querySelector('#furniture-prevBtn');\n  const nextBtn = document.querySelector('#furniture-nextBtn');\n\n  if (prevBtn) {\n    prevBtn.disabled = page <= 1;\n  }\n  if (nextBtn) {\n    nextBtn.disabled = page >= totalPages;\n  }\n  renderPaginationNumbers();\n}\n\nfunction renderPaginationNumbers() {\n  const paginationNumbers = document.querySelector(\n    '#furniture-paginationNumbers'\n  );\n  if (!paginationNumbers) return;\n\n  let numbersHTML = '';\n  if (totalPages <= 7) {\n    for (let i = 1; i <= totalPages; i++) {\n      numbersHTML += `<button class=\"page-number ${\n        i === page ? 'active' : ''\n      }\" data-page=\"${i}\">${i}</button>`;\n    }\n  } else {\n    numbersHTML += `<button class=\"page-number ${\n      1 === page ? 'active' : ''\n    }\" data-page=\"1\">1</button>`;\n    if (page <= 3) {\n      for (let i = 2; i <= 3; i++) {\n        numbersHTML += `<button class=\"page-number ${\n          i === page ? 'active' : ''\n        }\" data-page=\"${i}\">${i}</button>`;\n      }\n      numbersHTML += `<span class=\"page-dots\">...</span>`;\n      numbersHTML += `<button class=\"page-number\" data-page=\"${totalPages}\">${totalPages}</button>`;\n    } else if (page >= totalPages - 3) {\n      numbersHTML += `<span class=\"page-dots\">...</span>`;\n      for (let i = totalPages - 3; i <= totalPages; i++) {\n        numbersHTML += `<button class=\"page-number ${\n          i === page ? 'active' : ''\n        }\" data-page=\"${i}\">${i}</button>`;\n      }\n    } else {\n      numbersHTML += `<span class=\"page-dots\">...</span>`;\n      for (let i = page - 1; i <= page + 1; i++) {\n        numbersHTML += `<button class=\"page-number ${\n          i === page ? 'active' : ''\n        }\" data-page=\"${i}\">${i}</button>`;\n      }\n      numbersHTML += `<span class=\"page-dots\">...</span>`;\n      numbersHTML += `<button class=\"page-number\" data-page=\"${totalPages}\">${totalPages}</button>`;\n    }\n  }\n\n  paginationNumbers.innerHTML = numbersHTML;\n}\n\nfunction showLoader() {\n  document.getElementById('loader').classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  document.getElementById('loader').classList.add('hidden');\n}\n\nfunction scrollToFurnitureTop() {\n  const section = document.querySelector('.furniture-gallery');\n  if (!section) return;\n  const offset = 140;\n  const top = section.getBoundingClientRect().top + window.scrollY - offset;\n\n  window.scrollTo({\n    top,\n    behavior: 'smooth',\n  });\n}\n/**scrollToFurnitureTop() котроль скролу. (p.S. chat gpt+goole) */\n","import axios from 'axios';\nimport refs from './refs';\nimport Swiper from 'swiper';\nimport 'swiper/css';\nimport 'swiper/css/pagination';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { renderProductDetails } from './furniture-details-modal';\n\nfunction removeSliderPG() {\n  const swipeBoxPG = document.querySelector('.popular-goods-swiper');\n  swipeBoxPG.remove();\n}\n\nasync function getPopularGoods() {\n  try {\n    const response = await axios.get(\n      `https://furniture-store.b.goit.study/api/furnitures?type=popular`\n    );\n    return response.data.furnitures || [];\n  } catch (error) {\n    removeSliderPG();\n    iziToast.error({\n      title: error.message,\n      position: 'topRight',\n    });\n  }\n}\n\nasync function renderPopularGoods() {\n  const response = await getPopularGoods();\n  \n  if (!response || response.length < 3) {\n    iziToast.info({\n      title: 'Увага',\n      message: 'Недостатньо товарів для відображення (мінімум 3)',\n      position: 'topRight',\n    });\n    return;\n  }\n  \n  const markup = response\n    .map(({ images, name, color, price, _id }) => {\n      if (name.length > 28) {\n        name = name.slice(0, 28) + '...';\n      }\n      return `\n      <li class=\"popular-goods-item swiper-slide\">\n        <img class=\"popular-goods-img\" src=\"${images[0]}\" alt=\"${name}\">\n        <div class=\"popular-goods-item-desc\">\n            <h3 class=\"popular-goods-item-title\">${name}</h3>\n            <ul class=\"popular-goods-colors\">\n                ${color\n                  .map(\n                    goodsColor =>\n                      `<input type=\"checkbox\" class=\"goods-color\" style=\"background-color: ${goodsColor}\" disabled>`\n                  )\n                  .join('')}\n            </ul>\n            <p class=\"popular-goods-price\">${price} грн</p>\n        </div>\n        <button class=\"furniture-btn btn-details\" data-id=\"${_id}\">Детальніше</button>\n      </li>\n        `;\n    })\n    .join('');\n  refs.popularGoodsList.innerHTML = markup;\n\n  new Swiper('.popular-goods-swiper', {\n    modules: [Navigation, Pagination],\n    pagination: {\n      el: '.popular-goods-swiper-pagination',\n      clickable: true,\n      dynamicBullets: true,\n    },\n    navigation: {\n      nextEl: '.popular-goods-swiper-button-next',\n      prevEl: '.popular-goods-swiper-button-prev',\n    },\n    grabCursor: true,\n    breakpoints: {\n      375: {\n        slidesPerView: 1,\n        spaceBetween: 16,\n      },\n      768: {\n        slidesPerView: 2,\n        spaceBetween: 24,\n      },\n      1440: {\n        slidesPerView: 4,\n        spaceBetween: 24,\n      },\n    },\n  });\n\n  refs.popularGoodsList.addEventListener('click', event => {\n    const cardBtn = event.target.closest('.furniture-btn');\n    if (!cardBtn) return;\n    const currentProductId = cardBtn.dataset.id;\n    const selectedProduct = response.find(\n      product => product._id === currentProductId\n    );\n    renderProductDetails([selectedProduct]);\n  });\n}\n\nrenderPopularGoods();\n","import Accordion from 'accordion-js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  new Accordion('.accordion-container', {\n    duration: 1000,\n    showMultiple: false,\n    collapse: true,\n  });\n});\n","import Swiper from 'swiper';\nimport 'swiper/css';\nimport 'swiper/css/pagination';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport rater from 'rater-js';\nimport refs from './refs';\n\naxios.defaults.baseURL = 'https://furniture-store.b.goit.study/api';\n\nconst starToRun = document.querySelector('.star-to-run');\nconst starUrl = starToRun.getAttribute('src');\nconst feedbackSection = document.querySelector('.feedback');\n\nfunction removeSlider() {\n  const swipeBox = document.querySelector('.feedback-swiper');\n  swipeBox.remove();\n}\n\nlet currentPage = 1;\nlet totalPages = 1;\nlet isLoading = false;\nlet swiper = null;\nlet allFeedbacks = [];\n\nasync function getFeedbackData(page = 1) {\n  try {\n    const response = await axios.get(`/feedbacks?limit=3&page=${page}`);\n    return {\n      feedbacks: response.data.feedbacks || [],\n      totalPages: Math.ceil(response.data.total / response.data.limit) || 1,\n      currentPage: parseInt(response.data.page) || 1,\n    };\n  } catch (error) {\n    removeSlider();\n    iziToast.error({\n      title: 'Помилка',\n      message: 'Не вдалось завантажити дані. Спробуйте пізніше',\n      position: 'topRight',\n    });\n    return null;\n  }\n}\n\nfunction createFeedbackSlide({ descr, name, rate, _id }) {\n  return `\n    <li class=\"feedback-item swiper-slide\">\n        <div id=\"rater-${_id}\" data-rating=\"${rate}\"></div>\n        <p class=\"feedback-descr\">${descr}</p>\n        <p class=\"feedback-name\">${name}</p>\n    </li>`;\n}\n\nasync function loadMoreFeedbacks() {\n  if (isLoading || currentPage >= totalPages) return;\n\n  isLoading = true;\n  const nextPage = currentPage + 1;\n  const response = await getFeedbackData(nextPage);\n\n  if (response && response.feedbacks.length > 0) {\n    currentPage = response.currentPage;\n    allFeedbacks = [...allFeedbacks, ...response.feedbacks];\n\n    const newSlides = response.feedbacks\n      .map(feedback => createFeedbackSlide(feedback))\n      .join('');\n\n    refs.feedbackList.insertAdjacentHTML('beforeend', newSlides);\n    addStarToFeedbackList(response.feedbacks);\n\n    feedbackSection.querySelectorAll('.star-value').forEach(el => {\n      el.style.backgroundImage = `url(\"${starUrl}\")`;\n    });\n\n    if (swiper) {\n      swiper.update();\n    }\n  }\n\n  isLoading = false;\n}\n\nasync function renderFeedback() {\n  const response = await getFeedbackData(1);\n\n  if (!response || response.feedbacks.length < 3) {\n    removeSlider();\n    iziToast.info({\n      title: 'Увага',\n      message: 'Недостатньо відгуків для відображення (мінімум 3)',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  allFeedbacks = response.feedbacks;\n  currentPage = response.currentPage;\n  totalPages = response.totalPages;\n\n  const slidesMarkup = response.feedbacks\n    .map(feedback => createFeedbackSlide(feedback))\n    .join('');\n\n  refs.feedbackList.insertAdjacentHTML('beforeend', slidesMarkup);\n  addStarToFeedbackList(response.feedbacks);\n\n  feedbackSection.querySelectorAll('.star-value').forEach(el => {\n    el.style.backgroundImage = `url(\"${starUrl}\")`;\n  });\n\n  swipeFeedbackLists();\n}\n\nfunction addStarToFeedbackList(response) {\n  response.forEach(({ rate, _id }) => {\n    rater({\n      max: 5,\n      readOnly: true,\n      rating: rate,\n      starSize: 20,\n      element: document.querySelector(`#rater-${_id}`),\n    });\n  });\n}\n\nfunction swipeFeedbackLists() {\n  swiper = new Swiper('.feedback-swiper', {\n    modules: [Navigation, Pagination],\n    pagination: {\n      el: '.swiper-pagination',\n      clickable: true,\n      dynamicBullets: true,\n    },\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev',\n    },\n    grabCursor: true,\n    breakpoints: {\n      375: {\n        slidesPerView: 1,\n        spaceBetween: 20,\n      },\n      768: {\n        slidesPerView: 2,\n        spaceBetween: 24,\n      },\n      1440: {\n        slidesPerView: 3,\n        spaceBetween: 24,\n      },\n    },\n    on: {\n      reachEnd: function () {\n        if (currentPage < totalPages) {\n          loadMoreFeedbacks();\n        }\n      },\n      slideChange: function () {\n        const remainingSlides =\n          this.slides.length - this.activeIndex - this.slidesPerViewDynamic();\n        if (remainingSlides <= 2 && currentPage < totalPages) {\n          loadMoreFeedbacks();\n        }\n      },\n    },\n  });\n}\n\nrenderFeedback();\n"],"names":["refs","_a","openModal","_b","btn","closeModal","_c","onBackdropClick","_d","link","onEscPress","event","button","e","target","handleFormSubmit","savedData","iziToast","parsedData","productId","color","email","phone","comment","orderData","existingEmailError","markupError","existingPhoneError","existingCommentError","isEmailValid","isPhoneValid","isCommentValid","submitOrder","closeOrderModal","targetElement","message","errorMessage","openOrderModal","listenerHandlClose","elementInFocus","elementOutFocus","placeholder","baseURL","axios","error","modalContent","starToRunModal","starUrlModal","renderProductDetails","product","openProductDetailis","markup","createProductMarkup","addStarToModalList","el","mainImg","thumbnails","originalSrc","originalAlt","thumbnail","listenerClosseModalProduct","handleOrderSubmit","_id","images","name","price","rate","sizes","description","type","generateColorOptions","colors","index","rater","selectedColor","closseProductDatailis","imagesUrlForCategories","allProducts","BaseUrl","handlerCategories","handlerMore","getCategories","currentIsDesktop","getFurnitureForPagination","limit","getFurniture","resizeTimeout","isDesktop","currentCategoryBtn","selectedCategory","page","hideLoadMoreBtn","isInitialLoad","renderFurniture","markUpFurniture","updatePaginationControls","scrollToFurnitureTop","categories","markUpCategories","categoryImages","markUp","imageUrl","totalPages","category","params","data","furnituresAll","showLoadMoreBtn","items","colorsFurniture","colorValue","selectCategory","prevBtn","nextBtn","paginationNumbers","handlePrevPage","handleNextPage","handlePageNumberClick","targetPage","showLoader","hideLoader","cardBtn","selectedProduct","renderPaginationNumbers","numbersHTML","i","section","top","removeSliderPG","getPopularGoods","renderPopularGoods","response","goodsColor","Swiper","Navigation","Pagination","currentProductId","Accordion","starToRun","starUrl","feedbackSection","removeSlider","currentPage","isLoading","swiper","allFeedbacks","getFeedbackData","createFeedbackSlide","descr","loadMoreFeedbacks","nextPage","newSlides","feedback","addStarToFeedbackList","renderFeedback","slidesMarkup","swipeFeedbackLists"],"mappings":"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"}