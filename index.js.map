{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/feedback.js","../src/js/furniture_list.js","../src/main.js"],"sourcesContent":["const refs = {\n  feedbackList: document.querySelector('.feedback-list'),\n  categoriesList: document.querySelector('.furniture-categories'),\n  furnitureGrid: document.querySelector('.furniture-gallery'),\n  furnitureLoadMoreBtn: document.querySelector('#furniture-loadMoreBtn'),\n};\n\nexport default refs;\n","import Swiper from 'swiper';\nimport 'swiper/css';\nimport 'swiper/css/pagination';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport refs from './refs';\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\naxios.defaults.baseURL = 'https://furniture-store.b.goit.study/api';\n\nfunction hideSwipeBox() {\n  const swipeBox = document.querySelector('.swiper');\n  swipeBox.remove();\n}\n\nasync function getFeedback(currentPage = 1) {\n  try {\n    const response = await axios.get(`/feedbacks?limit=10&page=${currentPage}`);\n    return response;\n  } catch (error) {\n    hideSwipeBox();\n    iziToast.error({\n      title: error.message,\n      position: 'topRight',\n    });\n  }\n}\n\nfunction getStars(rate) {\n  const fullStars = Math.floor(rate);\n  const hasHalfStar = rate % 1 !== 0;\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n  let stars = '';\n\n  for (let i = 0; i < fullStars; i++) {\n    stars += `<svg class=\"star star-filled\" width=\"20\" height=\"20\"><use href=\"img/icons.svg#icon-star-filled\"></use></svg>`;\n  }\n  if (hasHalfStar) {\n    stars += `<svg class=\"star star-half\" width=\"20\" height=\"20\"><use href=\"img/icons.svg#icon-star-half\"></use></svg>`;\n  }\n  for (let i = 0; i < emptyStars; i++) {\n    stars += `<svg class=\"star star-empty\" width=\"20\" height=\"20\"><use href=\"img/icons.svg#icon-star-empty\"></use></svg>`;\n  }\n\n  return stars;\n}\n\nfunction renderFeedback(response) {\n  const slidesMarkup = response\n    .map(({ descr, name, rate }) => {\n      const starsMarkup = getStars(rate);\n\n      return `\n      <li class=\"feedback-item swiper-slide\">\n          <div class=\"star-container\">${starsMarkup}</div>\n          <p class=\"feedback-descr\">${descr}</p>\n          <p class=\"feedback-name\">${name}</p>\n      </li>`;\n    })\n    .join('');\n\n  refs.feedbackList.insertAdjacentHTML('beforeend', slidesMarkup);\n\n  new Swiper('.swiper', {\n    modules: [Navigation, Pagination],\n    pagination: {\n      el: '.swiper-pagination',\n      clickable: true,\n    },\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev',\n    },\n    breakpoints: {\n      375: {\n        slidesPerView: 1,\n        spaceBetween: 0,\n      },\n      768: {\n        slidesPerView: 2,\n        spaceBetween: 24,\n      },\n      1440: {\n        slidesPerView: 3,\n        spaceBetween: 24,\n      },\n    },\n  });\n}\n\nexport async function feedbackSection() {\n  const response = await getFeedback();\n  renderFeedback(response.data.feedbacks);\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '../css/furniture-list.css';\nimport refs from './refs';\n\nconst BaseUrl = 'https://furniture-store.b.goit.study/api/';\n\nexport async function getCategories() {\n  try {\n    const res = await axios.get(`${BaseUrl}categories`);\n    const categories = res.data;\n    markUpCategories(categories);\n  } catch (error) {\n    iziToast.error({\n      title: 'Помилка',\n      message: 'Не вдалося завантажити дані. Спробуйте пізніше',\n      position: 'topRight',\n    });\n  }\n}\n\nfunction markUpCategories(categories) {\n  const markUp = [{ _id: '', name: 'Всі товари' }, ...categories]\n    .map(\n      ({ _id, name }) =>\n        `<li><button type=\"button\" class=\"category-btn${\n          _id === '' ? ' active' : ''\n        }\"  data-category=\"${_id}\">${name}</button></li>`\n    )\n    .join('');\n  refs.categoriesList.insertAdjacentHTML('beforeend', markUp);\n}\n\nlet page = 1;\nconst limit = 8;\nexport async function getFurniture(limit, page, category = '') {\n  try {\n    const params = {\n      limit: limit,\n      page: page,\n    };\n    if (category) {\n      params.category = category;\n    }\n\n    const responce = await axios.get(`${BaseUrl}furnitures`, { params });\n    const data = responce.data;\n\n    if (page === 1) {\n      refs.furnitureGrid.innerHTML = '';\n    }\n    markUpFurniture(data.furnitures);\n    if (page * limit >= data.totalItems) {\n      refs.furnitureLoadMoreBtn.style.display = 'none';\n    } else {\n      refs.furnitureLoadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Помилка',\n      message: 'Не вдалося завантажити дані. Спробуйте пізніше',\n      position: 'topRight',\n    });\n  }\n}\n\nfunction markUpFurniture(items) {\n  const markUp = items\n    .map(({ _id, name, images, color, price }) => {\n      const colorsFurniture = color\n        .map(\n          c => `<span class=\"color-dot\" style=\"background-color:${c}\"></span>`\n        )\n        .join('');\n\n      return `\n        <li class=\"furniture-card\">\n        <img src=\"${images[0]}\" alt=\"${name}\" class=\"furniture-img\">\n        <h3 class=\"furniture-name\">${name}</h3>\n        \n        <p class=\"furniture-color\"> ${colorsFurniture}</p>\n        <p class=\"furniture-price\">${price} грн</p>\n        <button class=\"furniture-btn btn-details\" data-id=\"${_id}\">Детальніше</button>\n\n        </li>\n        \n        `;\n    })\n    .join('');\n  refs.furnitureGrid.insertAdjacentHTML('beforeend', markUp);\n}\ngetCategories();\ngetFurniture(limit, page);\n\nexport function handlerCategories(event) {\n  if (!event.target.classList.contains('category-btn')) return;\n  const buttons = refs.categoriesList.querySelectorAll('.category-btn');\n  buttons.forEach(btn => btn.classList.remove('active'));\n\n  event.target.classList.add('active');\n\n  const selectCategory = event.target.dataset.category;\n\n  page = 1;\n\n  getFurniture(limit, page, selectCategory);\n}\n","import 'modern-normalize/modern-normalize.css';\nimport './css/styles.css';\nimport { feedbackSection } from './js/feedback';\nimport { handlerCategories } from './js/furniture_list';\nimport refs from './js/refs';\n// import './js/order-modal.js'\nfeedbackSection();\n// Furniture-list\nrefs.categoriesList.addEventListener('click', handlerCategories);\n"],"names":["refs","axios","hideSwipeBox","getFeedback","currentPage","error","iziToast","getStars","rate","fullStars","hasHalfStar","emptyStars","stars","i","renderFeedback","response","slidesMarkup","descr","name","Swiper","Navigation","Pagination","feedbackSection","BaseUrl","getCategories","categories","markUpCategories","markUp","_id","page","limit","getFurniture","category","params","data","markUpFurniture","items","images","color","price","colorsFurniture","c","handlerCategories","event","btn","selectCategory"],"mappings":"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"}